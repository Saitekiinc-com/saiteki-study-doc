# Lv.3 発展: 品質・保守性・パフォーマンス

Lv.3のゴールは、<strong>「パフォーマンスとセキュリティを考慮し、保守性の高いバックエンドを設計できること」</strong>です。
大量のアクセスや攻撃に耐えうるシステムを目指します。

## 1. パフォーマンスチューニング
ボトルネックを特定し、解消します。

### 学習項目
*   **N+1問題**:
    *   ループ内でクエリを発行してしまう問題の理解と解消（Eager Loading）。
*   **インデックス設計**:
    *   B-Treeインデックスの仕組み。
    *   複合インデックスとカバリングインデックス。
*   **キャッシュ戦略**:
    *   Redisなどを使ったデータキャッシュ。
    *   キャッシュの有効期限 (TTL) と無効化戦略。

### チェックリスト
- [ ] クエリログを見て、N+1問題が発生していないか確認できる。
- [ ] `EXPLAIN` を使ってクエリの実行計画を確認し、インデックスが効いているか判断できる。

## 2. セキュリティ
脆弱性のない安全なアプリケーションを作ります。

### 学習項目
*   **OWASP Top 10**:
    *   SQLインジェクション、XSS、CSRFなどの主要な脆弱性と対策。
*   **セキュアな通信**:
    *   CORS (Cross-Origin Resource Sharing) の適切な設定。
    *   レートリミッティング（DoS攻撃対策）。

### チェックリスト
- [ ] プリペアードステートメント（またはORM）を使ってSQLインジェクションを防げる。
- [ ] 外部APIのキーなどをコードに直書きせず、環境変数から読み込める。

## 3. テストと品質
変更に強いコードベースを維持します。

### 学習項目
*   **単体テスト**:
    *   ビジネスロジックのテスト。
    *   モック (Mock) を使った外部依存（DBなど）の切り離し。
*   **統合テスト**:
    *   APIのエンドポイントを叩いて、DBまで含めた動作を確認するテスト。

### チェックリスト
- [ ] サービスのメソッドに対して、正常系と異常系のテストケースを書ける。
- [ ] テスト用DBを用意して、統合テストを実行できる環境を構築できる。
